<table cdk-table [dataSource]="sortedDataSource()" recycleRows class="table-auto">
  <!-- Position Column -->
  <ng-container cdkColumnDef="checkbox">
    <th cdk-header-cell *cdkHeaderCellDef (click)="adjustSort(0)">
      No.
      @if (sortKey() === 0) {
        <span>
          {{ sortDirection() === 'asc' ? '↥' : '↧' }}
        </span>
      }
    </th>
    <td cdk-cell *cdkCellDef="let element; let i = index">{{ i + 1 }}</td>
  </ng-container>

  @for(column of columns(); track column) {
    <ng-container cdkColumnDef="{{ column }}">
      <th cdk-header-cell *cdkHeaderCellDef (click)="adjustSort(dynamicColumns()[$index].rnr - 1)">
        {{ column }}
        @if (sortKey() === dynamicColumns()[$index].rnr - 1) {
          <span>
            {{ sortDirection() === 'asc' ? '↥' : '↧' }}
          </span>
        }
      </th>
      <td cdk-cell *cdkCellDef="let element">{{ element[dynamicColumns()[$index].rnr - 1] }}</td>
    </ng-container>
  }

  <tr cdk-header-row *cdkHeaderRowDef="displayedColumns()"></tr>
  <tr cdk-row *cdkRowDef="let row; columns: displayedColumns()"></tr>
</table>
